

tasks {
    jar {
        dependsOn("base:build")
        dependsOn("v1_17_1:build")
        dependsOn("v1_19_2:build")
    }
}

java {
    toolchain.languageVersion.set(JavaLanguageVersion.of(16))
}

jar {
    from {
        duplicatesStrategy = DuplicatesStrategy.EXCLUDE
        configurations.runtimeClasspath.collect {
            it.isDirectory() ? it : zipTree(it)
        }
    }
}
repositories {
    mavenCentral()
    maven {
        name = 'papermc-repo'
        url = 'https://papermc.io/repo/repository/maven-public/'
    }
}

dependencies {
    compileOnly 'io.papermc.paper:paper-api:1.17.1-R0.1-SNAPSHOT'
    api files('v1_17_1/build/libs/v1_17_1-1.0-SNAPSHOT.jar')
    api files('v1_19_2/build/libs/v1_19_2-1.0-SNAPSHOT.jar')
    api files('base/build/libs/base-1.0-SNAPSHOT.jar')
}
